
<!DOCTYPE html>
<html dir="ltr" lang="en">

  <head>
    <meta charset="utf-8">
    <title>RSCVD Status Prototype</title>
    <link rel="icon" href="/playground/favicon.ico" type="image/x-icon" />
  </head>

 <body>

  <h1>RSCVD Request Status</h1>
   <p>Tell us the email you made your requests with and we'll tell your requests status:</p>
<p><input type="text" id="email" placeholder="youremail@ill.org" value="" onkeydown="myFunc()"></p>
<table width=100%>
<thead>
<th><b>Date</b></th>
<th><b>Title</b></th>
<th><b>Status</b></th>
<th><b>Cancel</b></th>
</thead>
<tbody sheetsu="https://sheetsu.com/apis/v1.0su/ef8538ab4328" sheetsu-limit="20" sheetsu-ignore-case="true">
<tr>
<td>{{timestamp}}</td>
<td>{{title}}</td>
<td>{{Status}}</td>
<td><a href="https://aurl.org/{{Timestamp}}&{{title}}">Click here</a></td>
</tr>
</tbody>
</table>

<script src="//load.sheetsu.com"></script>
   <script type="text/javascript">
    var myFunc = debounce(function () {
        emailValue = emailValue();
        addSearchValue({ email: "*" + emailValue + "*" });
        resetTableBody();
        triggerNewSearch();

    }, 400);


    function emailValue() {
        return document.getElementById("email").value;
    }

    function tableElement() {
        return document.querySelector("tbody[sheetsu]");
    }

    function resetTableBody() {
        document.querySelector("tbody[sheetsu]").innerHTML = tableRow();
    }

    function addSearchValue(searchValue) {
        tableElement().setAttribute("sheetsu-search", JSON.stringify(searchValue));
    }

    function triggerNewSearch() {
        var element = document.querySelector("tbody[sheetsu]");
        (new ChangeGetElement(element)).call();
    }

    function tableRow() {
        return '<td>{{timestamp}}</td><td>{{title}}</td><td>{{status}}</td><td><a href="https://aurl.org/{{timestamp}}&{{title}}">Click here</a></td>';
    }

    function debounce(func, wait, immediate) {
        var timeout;
        return function() {
        var context = this, args = arguments;
        var later = function() {
            timeout = null;
            if (!immediate) func.apply(context, args);
        };
        var callNow = immediate && !timeout;
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
        if (callNow) func.apply(context, args);
        };
    };

    </script>
          
          
          
  </body>

  
</html>
